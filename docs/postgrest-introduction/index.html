<!DOCTYPE html>
<html>
<head>

    <!-- Document Settings -->
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />

    <!-- Base Meta -->
    <!-- dynamically fixing the title for tag/author pages -->



    <title>PostGrest Introduction</title>
    <meta name="HandheldFriendly" content="True" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <!-- Styles'n'Scripts -->
    <link rel="stylesheet" type="text/css" href="/assets/built/screen.css" />
    <link rel="stylesheet" type="text/css" href="/assets/built/screen.edited.css" />
    <link rel="stylesheet" type="text/css" href="/assets/built/syntax.css" />
    <!-- highlight.js -->
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css">
    <style>.hljs { background: none; }</style>

    <!--[if IE]>
        <style>
            p, ol, ul{
                width: 100%;
            }
            blockquote{
                width: 100%;
            }
        </style>
    <![endif]-->
    
    <!-- This tag outputs SEO meta+structured data and other important settings -->
    <meta name="description" content="Just my thoughts, right or wrong" />
    <link rel="shortcut icon" href="/assets/images/favicon.png" type="image/png" />
    <link rel="canonical" href="/postgrest-introduction/" />
    <meta name="referrer" content="no-referrer-when-downgrade" />

     <!--title below is coming from _includes/dynamic_title-->
    <meta property="og:site_name" content="Jonathan Harrington" />
    <meta property="og:type" content="website" />
    <meta property="og:title" content="PostGrest Introduction" />
    <meta property="og:description" content="Just my thoughts, right or wrong" />
    <meta property="og:url" content="/postgrest-introduction/" />
    <meta property="og:image" content="/images/postgrest.png" />
    <meta property="article:publisher" content="https://www.facebook.com/" />
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="PostGrest Introduction" />
    <meta name="twitter:description" content="Just my thoughts, right or wrong" />
    <meta name="twitter:url" content="/" />
    <meta name="twitter:image" content="/images/postgrest.png" />
    <meta name="twitter:label1" content="Written by" />
    <meta name="twitter:data1" content="Jonathan Harrington" />
    <meta name="twitter:site" content="@jonathanharring" />
    <meta name="twitter:creator" content="@jonathanharring" />
    <meta property="og:image:width" content="2000" />
    <meta property="og:image:height" content="666" />

    <script type="application/ld+json">
{
    "@context": "https://schema.org",
    "@type": "Website",
    "publisher": {
        "@type": "Organization",
        "name": "Jonathan Harrington",
        "logo": "/"
    },
    "url": "/postgrest-introduction/",
    "image": {
        "@type": "ImageObject",
        "url": "/images/postgrest.png",
        "width": 2000,
        "height": 666
    },
    "mainEntityOfPage": {
        "@type": "WebPage",
        "@id": "/postgrest-introduction/"
    },
    "description": "Just my thoughts, right or wrong"
}
    </script>

    <!-- <script type="text/javascript" src="https://demo.ghost.io/public/ghost-sdk.min.js?v=724281a32e"></script>
    <script type="text/javascript">
    ghost.init({
    	clientId: "ghost-frontend",
    	clientSecret: "f84a07a72b17"
    });
    </script> -->

    <meta name="generator" content="Jekyll 3.6.2" />
    <link rel="alternate" type="application/rss+xml" title="PostGrest Introduction" href="/feed.xml" />


</head>
<body class="post-template">

    <div class="site-wrapper">
        <!-- All the main content gets inserted here, index.hbs, post.hbs, etc -->
        <!-- default -->

<!-- The tag above means: insert everything in this file
into the {body} of the default.hbs template -->

<header class="site-header outer">
    <div class="inner">
        <nav class="site-nav">
    <div class="site-nav-left">
        
            
                <a class="site-nav-logo" href="/">Jonathan Harrington</a>
            
        
        
            <ul class="nav" role="menu">
    <li class="nav-home" role="menuitem"><a href="/">Home</a></li>
    <li class="nav-about" role="menuitem"><a href="/about/">About</a></li>
</ul>

        
    </div>
    <div class="site-nav-right">
        <div class="social-links">
            
                <a class="social-link social-link-tgh" href="https://github.com/prio" target="_blank" rel="noopener"><svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>GitHub icon</title><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"/></svg></a>
            
            
                <a class="social-link social-link-tli" href="https://www.linkedin.com/in/jnharrington" target="_blank" rel="noopener"><svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>LinkedIn icon</title><path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"/></svg></a>
                                    
            
                <a class="social-link social-link-tw" href="https://twitter.com/jonathanharring" target="_blank" rel="noopener"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><path d="M30.063 7.313c-.813 1.125-1.75 2.125-2.875 2.938v.75c0 1.563-.188 3.125-.688 4.625a15.088 15.088 0 0 1-2.063 4.438c-.875 1.438-2 2.688-3.25 3.813a15.015 15.015 0 0 1-4.625 2.563c-1.813.688-3.75 1-5.75 1-3.25 0-6.188-.875-8.875-2.625.438.063.875.125 1.375.125 2.688 0 5.063-.875 7.188-2.5-1.25 0-2.375-.375-3.375-1.125s-1.688-1.688-2.063-2.875c.438.063.813.125 1.125.125.5 0 1-.063 1.5-.25-1.313-.25-2.438-.938-3.313-1.938a5.673 5.673 0 0 1-1.313-3.688v-.063c.813.438 1.688.688 2.625.688a5.228 5.228 0 0 1-1.875-2c-.5-.875-.688-1.813-.688-2.75 0-1.063.25-2.063.75-2.938 1.438 1.75 3.188 3.188 5.25 4.25s4.313 1.688 6.688 1.813a5.579 5.579 0 0 1 1.5-5.438c1.125-1.125 2.5-1.688 4.125-1.688s3.063.625 4.188 1.813a11.48 11.48 0 0 0 3.688-1.375c-.438 1.375-1.313 2.438-2.563 3.188 1.125-.125 2.188-.438 3.313-.875z"/></svg>
</a>
            
        </div>
        
    </div>
</nav>

    </div>
</header>

<!-- Everything inside the #post tags pulls data from the post -->
<!-- #post -->

<main id="site-main" class="site-main outer" role="main">
    <div class="inner">

        <article class="post-full  post ">

            <header class="post-full-header">
                <section class="post-full-meta">
                    <time class="post-full-meta-date" datetime="16 March 2015">16 March 2015</time>
                    
                </section>
                <h1 class="post-full-title">PostGrest Introduction</h1>
            </header>

            
            <figure class="post-full-image" style="background-image: url(/images/postgrest.png)">
            </figure>
            

            <section class="post-full-content">
                <div class="kg-card-markdown">
                    <p>I recently came across an interesting project called <a href="https://github.com/begriffs/postgrest">PostgREST</a>, an application that claimed to read the database schema of you’‘r PostgreSQL database and automatically create a “a cleaner, more standards-compliant, faster API than you are likely to write from scratch.”
<!--excerpt--></p>

<h1 id="setup">Setup</h1>

<p>Binaries are available for OS X and Linux on its <a href="https://github.com/begriffs/postgrest">project page</a>. You will also need PostgreSQL installed, <a href="http://postgresapp.com/">PostgresApp</a> is an easy way to get up and running on OS X. Next lets create a simple database and populate it with some data. <a href="http://sqitch.org/">Sqitch</a> is a great tool to manage database changes and we will use it for this post.</p>

<h1 id="how-it-works">How it works</h1>
<p>PostgREST allows you to have multiple versions of your API and it assumes that each version is stored in a schema named after that version, so version 1 is in a schema named “1”, version 2 in a schema named “2” etc.</p>

<p>Obvioulsy, most production databases won’‘t have a schema named “1” so to expose your data using PostgREST we can create views in the “1” schema that serve up that data. I would strongly recommended that you do this for new projects also, a REST resource does not nessacarily have to be a one-to-one mapping to a row in a table and using views decouples our presentation layer from our storage format.</p>

<h1 id="create-a-database">Create a database</h1>
<p>(First lets add a helpful git alias we will use for the post, <em>optional</em>)</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ git config --global alias.add-commit ''!git add -A &amp;&amp; git commit''
</code></pre></div></div>

<p>Next lets create a simple database with some tables and populate it with some data.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ createdb goodfilm
$ git init .
$ sqitch init goodfilm
$ sqitch config core.engine pg
$ sqitch target add production db:pg://localhost:5432/goodfilm
$ sqitch engine add pg
$ sqitch engine set-target pg production
$ sqitch add appschmea -n ''Add schema for goodfilm objects''
</code></pre></div></div>

<p>deploy/appschmea.sql</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>-- Deploy appschmea
BEGIN;
create schema film;
COMMIT;
</code></pre></div></div>
<p>revert/appschmea.sql</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>-- Revert appschmea
BEGIN;
drop schema film;
COMMIT;
</code></pre></div></div>

<p>Deploy our changes</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ sqitch deploy
</code></pre></div></div>

<p>And if that all worked lets add the change to version control.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ git add-commit -m "Adding goodfilm schema"
</code></pre></div></div>

<p>Now repeat the steps to add the goodfilm tables (normally you split this out into multiple files but we will use just the one here for brevity).</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ sqitch add film -n "Add the goodfilm tables"
</code></pre></div></div>

<p>deploy/film.sql</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>- Deploy film

BEGIN;

CREATE TABLE film.director
(
  name text NOT NULL PRIMARY KEY
);

CREATE TABLE film.film
(
  id serial PRIMARY KEY,
  title text NOT NULL,
  year date NOT NULL,
  director text,
  rating real NOT NULL DEFAULT 0,
  language text NOT NULL,
  CONSTRAINT film_director_fkey FOREIGN KEY (director)
      REFERENCES film.director (name) MATCH SIMPLE
      ON UPDATE NO ACTION ON DELETE NO ACTION
);

CREATE TABLE film.festival
(
  name text NOT NULL PRIMARY KEY
);

CREATE TABLE film.competition
(
  id serial PRIMARY KEY,
  name text NOT NULL,
  festival text NOT NULL,
  year date NOT NULL,

  CONSTRAINT comp_festival_fkey FOREIGN KEY (festival)
      REFERENCES film.festival (name) MATCH SIMPLE
      ON UPDATE NO ACTION ON DELETE NO ACTION
);

CREATE TABLE film.nominations
(
  id serial PRIMARY KEY,
  competition integer NOT NULL,
  film integer NOT NULL,
  won boolean NOT NULL DEFAULT true,

  CONSTRAINT nomination_competition_fkey FOREIGN KEY (competition)
     REFERENCES film.competition (id) MATCH SIMPLE
     ON UPDATE NO ACTION ON DELETE NO ACTION,
  CONSTRAINT nomination_film_fkey FOREIGN KEY (film)
     REFERENCES film.film (id) MATCH SIMPLE
     ON UPDATE NO ACTION ON DELETE NO ACTION
);

COMMIT;
</code></pre></div></div>
<p>revert/film.sql</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>-- Revert film

BEGIN;

DROP TABLE film.director CASCADE;
DROP TABLE film.film CASCADE;
DROP TABLE film.festival CASCADE;
DROP TABLE film.competition CASCADE;
DROP TABLE film.nominations CASCADE;

COMMIT;
</code></pre></div></div>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ sqitch deploy
$ git add-commit -m "Adding film table"
</code></pre></div></div>

<p>OK, now lets add some data and take a look around. For our dataset we are going to use the list of films nominated for the Venice Golden Lion and the Canne Palme d’‘Or over the last 20 years. Download the data file from this <a href="https://gist.github.com/prio/7d07a5cd840734342d35">gist</a> and import it into the database:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ psql -d goodfilm &lt; insert_data.sql
</code></pre></div></div>

<p>Now lets query the data</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ psql -d goodfilm
=# select title, rating from film.film limit 5;
        title        | rating
---------------------+--------
 Chuang ru zhe       |    6.2
 The Look of Silence |    8.3
 Fires on the Plain  |    5.8
 Far from Men        |    7.5
 Good Kill           |    6.1
(5 rows)

=# select * from film.nominations limit 5;
 id | competition | film | won
----+-------------+------+-----
  1 |           1 |    1 | f
  2 |           1 |    2 | f
  3 |           1 |    3 | f
  4 |           1 |    4 | f
  5 |           1 |    5 | f
(5 rows)
</code></pre></div></div>

<p>And lets get the top 5 rated films with their nominations</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>=# SELECT substring(f.title from 1 for 20) as title, c.name, f.rating from film.nominations as n
        LEFT JOIN film.film as f ON f.id=n.film
        LEFT JOIN film.competition as c ON c.id=n.competition 
        ORDER BY f.rating DESC
        limit 5;        
       title         |    name     | rating
----------------------+-------------+--------
 Winter Sleep         | Palme d''Or  |    8.5
 Mommy                | Palme d''Or  |    8.3
 The Look of Silence  | Golden Lion |    8.3
 Birdman: Or (The Une | Golden Lion |      8
 Sivas                | Golden Lion |    7.7
(5 rows)        
</code></pre></div></div>

<h2 id="create-an-api">Create an API</h2>

<p>Now we will use PostGrest to create an API. We will expose three resources:</p>

<ul>
  <li><strong>Film:</strong> The list of films</li>
  <li><strong>Festival:</strong> This will include the competions and nominations by year</li>
  <li><strong>Director:</strong> Will include the list of films directed by that director</li>
</ul>

<p>First we need to add a new schema</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ sqitch add v1schema -m "Adding API v1 schema"
</code></pre></div></div>

<p>deploy/v1schema.sql</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>-- Deploy v1schema

BEGIN;
create schema "1";
COMMIT;
</code></pre></div></div>
<p>revert/v1schema.sql</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>-- Revert v1schema

BEGIN;
drop schema "1";
COMMIT;
</code></pre></div></div>

<p>Commit it, deploy it and add the files for our API</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ git add-commit -m "Adding API v1 schema"
$ sqitch deploy
$ sqitch add v1views -m "Adding API v1 views"
</code></pre></div></div>

<p>And now we add the views we want to expose as our API. Again normally would would split these into seperate files/migrations but for brevity we will just use one set of files here</p>

<p>deploy/v1views.sql</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>-- Deploy v1views

BEGIN;

create or replace view "1".film as
select title, film.year, director, rating, language, comp.name as competition from film.film
 left join film.nominations as n on film.id = n.film
 left join film.competition as comp on n.competition = comp.id;

create or replace view "1".festival as
select comp.festival,
       comp.name as competition,
       comp.year,
       film.title,
       film.director,
       film.rating
 from film.nominations as noms
 left join film.film as film on noms.film = film.id
 left join film.competition as comp on noms.competition = comp.id
 order by comp.year desc, comp.festival, competition;

create or replace view "1".director as
select d.name, f.title, f.year, f.rating from film.director as d
 left join film.film as f on f.director = d.name;

COMMIT;
</code></pre></div></div>
<p>revert/v1views.sql</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>-- Revert v1views

BEGIN;
drop view "1".film;
drop view "1".director;
drop view "1".festival;
COMMIT;
</code></pre></div></div>

<p>Now lets deploy it and run PostGrest and take a look around</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ sqitch deploy
$ postgrest --db-host localhost --db-port 5432 --db-name goodfilm --db-pool 200 --anonymous $USER --port 3000 --db-user $USER           
</code></pre></div></div>

<p><strong>Note:</strong> PostGrest error messages seem to be non-existant at the moment so if the command just exits make sure the correct users exist in your database and you are using the correct password, port etc.</p>

<p>Ok, if you view http://localhost:3000/ you should now see the three resources we have exposed.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ curl -s http://localhost:3000/ | python -m json.tool
[
    {
        "insertable": false,
        "name": "director",
        "schema": "1"
    },
    {
        "insertable": false,
        "name": "festival",
        "schema": "1"
    },
    {
        "insertable": false,
        "name": "film",
        "schema": "1"
    }
]
</code></pre></div></div>
<p>Now lets try browsing around. First lets see what films nominated for awards last year have a rating greater than or equal to 8</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ curl -s "http://localhost:3000/festival?year=gte.2014-01-01&amp;rating=gte.8" | python -m json.tool
[
    {
        "competition": "Palme d''Or",
        "director": "Xavier Dolan",
        "festival": "Cannes Film Festival",
        "rating": 8.3,
        "title": "Mommy",
        "year": "2014-01-01"
    },
    {
        "competition": "Palme d''Or",
        "director": "Nuri Bilge Ceylan",
        "festival": "Cannes Film Festival",
        "rating": 8.5,
        "title": "Winter Sleep",
        "year": "2014-01-01"
    },
    {
        "competition": "Golden Lion",
        "director": "Joshua Oppenheimer",
        "festival": "Venice Film Festival",
        "rating": 8.3,
        "title": "The Look of Silence",
        "year": "2014-01-01"
    },
    {
        "competition": "Golden Lion",
        "director": "Alejandro Gonz\u00e1lez I\u00f1\u00e1rritu",
        "festival": "Venice Film Festival",
        "rating": 8,
        "title": "Birdman: Or (The Unexpected Virtue of Ignorance)",
        "year": "2014-01-01"
    }
]
</code></pre></div></div>

<p>Excellent, a few to add to my watch list. I am a big fan of Japanese movies, so lets take a look at what Japanese movies were nominated last year.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ curl -s "http://localhost:3000/film?year=gte.2014-01-01&amp;language=eq.Japanese" | python -m json.tool
[
    {
        "competition": "Golden Lion",
        "director": "Shin''ya Tsukamoto",
        "language": "Japanese",
        "rating": 5.8,
        "title": "Fires on the Plain",
        "year": "2014-01-01"
    },
    {
        "competition": "Palme d''Or",
        "director": "Naomi Kawase",
        "language": "Japanese",
        "rating": 6.9,
        "title": "Still the Water",
        "year": "2014-01-01"
    }
]
</code></pre></div></div>
<p>Hmm, I haven’‘t seen either but the ratings aren’‘t very encouraging.</p>

<h1 id="conclusion">Conclusion</h1>

<p>I hope I have shown that PostgreSQL combined with PostGrest is a powerful combination that can give you a quick way to expose your data to other applications or web frontends. We have also seen how we can expose resources that don’‘t have an exact one to one relationship with a table.</p>

<p>I think PostGrest is a project with a lot of promise, you now have one less reason to resort to storing your data it in a NoSQL database (because of the “free” REST API), so one less reason to give up all the benefits relational databases have to offer. I can also see a lot of uses for it when dealing with existing legacy databases.</p>


                </div>
            </section>

            <!-- Email subscribe form at the bottom of the page -->
            

            <footer class="post-full-footer">
                <!-- Everything inside the #author tags pulls data from the author -->
                <!-- #author-->
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                <!-- /author  -->
            </footer>

            <!-- If you use Disqus comments, just uncomment this block.
            The only thing you need to change is "test-apkdzgmqhj" - which
            should be replaced with your own Disqus site-id. -->
            
                <section class="post-full-comments">
                    <div id="disqus_thread"></div>
                    <script>
                        var disqus_config = function () {
                            this.page.url = '/postgrest-introduction/';
                            this.page.identifier = '/postgrest-introduction';
                            this.page.title = 'PostGrest Introduction';
                        };
                        (function() {
                            var d = document, s = d.createElement('script');
                            s.src = 'https://magpietech.disqus.com/embed.js';
                            s.setAttribute('data-timestamp', +new Date());
                            (d.head || d.body).appendChild(s);
                        })();
                    </script>
                </section>
            

        </article>

    </div>


<div class="comments">
	<div id="disqus_thread"></div>
	<script type="text/javascript">

	    var disqus_shortname = 'true';

	    (function() {
	        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
	        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
	        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
	    })();

	</script>
	<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>


</main>

<!-- Links to Previous/Next posts -->
<aside class="read-next outer">
    <div class="inner">
        <div class="read-next-feed">
            

            <!-- If there's a next post, display it using the same markup included from - partials/post-card.hbs -->
            
                

    <article class="post-card post-template">
        
            <a class="post-card-image-link" href="/simple-sliding-windows-in-elixir/">
                <div class="post-card-image" style="background-image: url(/images/Sized.png)"></div>
            </a>
        
        <div class="post-card-content">
            <a class="post-card-content-link" href="/simple-sliding-windows-in-elixir/">
                <header class="post-card-header">
                    

                    <h2 class="post-card-title">Simple Sliding Windows in Elixir</h2>
                </header>
                <section class="post-card-excerpt">
                    
                        <p></p>
                    
                </section>
            </a>
            <footer class="post-card-meta">
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                <span class="reading-time">
                    
                    
                      1 min read
                    
                </span>
            </footer>
        </div>
    </article>

            

            <!-- If there's a previous post, display it using the same markup included from - partials/post-card.hbs -->
            
                

    <article class="post-card post-template">
        
            <a class="post-card-image-link" href="/using-otp-from-elixir/">
                <div class="post-card-image" style="background-image: url(/images/logan.jpeg)"></div>
            </a>
        
        <div class="post-card-content">
            <a class="post-card-content-link" href="/using-otp-from-elixir/">
                <header class="post-card-header">
                    

                    <h2 class="post-card-title">Using OTP from Elixir</h2>
                </header>
                <section class="post-card-excerpt">
                    
                        <p></p>
                    
                </section>
            </a>
            <footer class="post-card-meta">
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                <span class="reading-time">
                    
                    
                      1 min read
                    
                </span>
            </footer>
        </div>
    </article>

            

        </div>
    </div>
</aside>

<!-- Floating header which appears on-scroll, included from includes/floating-header.hbs -->
<div class="floating-header">
    <div class="floating-header-logo">
        <a href="/">
            
                <img src="/assets/images/favicon.png" alt="Jonathan Harrington icon" />
            
            <span>Jonathan Harrington</span>
        </a>
    </div>
    <span class="floating-header-divider">&mdash;</span>
    <div class="floating-header-title">PostGrest Introduction</div>
    <div class="floating-header-share">
        <div class="floating-header-share-label">Share this <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
    <path d="M7.5 15.5V4a1.5 1.5 0 1 1 3 0v4.5h2a1 1 0 0 1 1 1h2a1 1 0 0 1 1 1H18a1.5 1.5 0 0 1 1.5 1.5v3.099c0 .929-.13 1.854-.385 2.748L17.5 23.5h-9c-1.5-2-5.417-8.673-5.417-8.673a1.2 1.2 0 0 1 1.76-1.605L7.5 15.5zm6-6v2m-3-3.5v3.5m6-1v2"/>
</svg>
</div>
        <a class="floating-header-share-tw" href="https://twitter.com/share?text=PostGrest+Introduction&amp;url=https://blog.jonharrington.org/postgrest-introduction/"
            onclick="window.open(this.href, 'share-twitter', 'width=550,height=235');return false;">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><path d="M30.063 7.313c-.813 1.125-1.75 2.125-2.875 2.938v.75c0 1.563-.188 3.125-.688 4.625a15.088 15.088 0 0 1-2.063 4.438c-.875 1.438-2 2.688-3.25 3.813a15.015 15.015 0 0 1-4.625 2.563c-1.813.688-3.75 1-5.75 1-3.25 0-6.188-.875-8.875-2.625.438.063.875.125 1.375.125 2.688 0 5.063-.875 7.188-2.5-1.25 0-2.375-.375-3.375-1.125s-1.688-1.688-2.063-2.875c.438.063.813.125 1.125.125.5 0 1-.063 1.5-.25-1.313-.25-2.438-.938-3.313-1.938a5.673 5.673 0 0 1-1.313-3.688v-.063c.813.438 1.688.688 2.625.688a5.228 5.228 0 0 1-1.875-2c-.5-.875-.688-1.813-.688-2.75 0-1.063.25-2.063.75-2.938 1.438 1.75 3.188 3.188 5.25 4.25s4.313 1.688 6.688 1.813a5.579 5.579 0 0 1 1.5-5.438c1.125-1.125 2.5-1.688 4.125-1.688s3.063.625 4.188 1.813a11.48 11.48 0 0 0 3.688-1.375c-.438 1.375-1.313 2.438-2.563 3.188 1.125-.125 2.188-.438 3.313-.875z"/></svg>

        </a>
        <a class="floating-header-share-fb" href="https://www.facebook.com/sharer/sharer.php?u=https://blog.jonharrington.org/postgrest-introduction/"
            onclick="window.open(this.href, 'share-facebook','width=580,height=296');return false;">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><path d="M19 6h5V0h-5c-3.86 0-7 3.14-7 7v3H8v6h4v16h6V16h5l1-6h-6V7c0-.542.458-1 1-1z"/></svg>

        </a>
    </div>
    <progress class="progress" value="0">
        <div class="progress-container">
            <span class="progress-bar"></span>
        </div>
    </progress>
</div>


<!-- /post -->

<!-- The #contentFor helper here will send everything inside it up to the matching #block helper found in default.hbs -->


        <!-- Previous/next page links - displayed on every page -->
        

        <!-- The footer at the very bottom of the screen -->
        <footer class="site-footer outer">
            <div class="site-footer-content inner">
                <section class="copyright"><a href="/">Jonathan Harrington</a> &copy; 2020</section>
                <section class="poweredby">Proudly published with <a href="https://jekyllrb.com/">Jekyll</a> &
                    <a href="https://pages.github.com/" target="_blank" rel="noopener">GitHub Pages</a> using
                    <a href="https://github.com/jekyller/jasper2" target="_blank" rel="noopener">Jasper2</a></section>
                <nav class="site-footer-nav">
                    <a href="/">Latest Posts</a>
                    <a href="https://github.com/prio" target="_blank" rel="noopener">Github</a>
                    <a href="https://www.linkedin.com/in/jnharrington" target="_blank" rel="noopener">Linkedin</a>
                    <a href="https://twitter.com/jonathanharring" target="_blank" rel="noopener">Twitter</a>
                </nav>
            </div>
        </footer>

    </div>

    <!-- The big email subscribe modal content -->
    

    <!-- highlight.js -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.10.0/components/prism-abap.min.js"></script>
    <script>$(document).ready(function() {
      $('pre code').each(function(i, block) {
        hljs.highlightBlock(block);
      });
    });</script>

    <!-- jQuery + Fitvids, which makes all video embeds responsive -->
    <script
        src="https://code.jquery.com/jquery-3.2.1.min.js"
        integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4="
        crossorigin="anonymous">
    </script>
    <script type="text/javascript" src="/assets/js/jquery.fitvids.js"></script>
    <script type="text/javascript" src="https://demo.ghost.io/assets/js/jquery.fitvids.js?v=724281a32e"></script>


    <!-- Paginator increased to "infinit" in _config.yml -->
    <!-- if paginator.posts  -->
    <!-- <script>
        var maxPages = parseInt('');
    </script>
    <script src="/assets/js/infinitescroll.js"></script> -->
    <!-- /endif -->

    


    <!-- Add Google Analytics  -->
    <!-- Google Analytics Tracking code -->
 <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', '', 'auto');
  ga('send', 'pageview');

 </script>


    <!-- The #block helper will pull in data from the #contentFor other template files. In this case, there's some JavaScript which we only want to use in post.hbs, but it needs to be included down here, after jQuery has already loaded. -->
    
        <script>

// NOTE: Scroll performance is poor in Safari
// - this appears to be due to the events firing much more slowly in Safari.
//   Dropping the scroll event and using only a raf loop results in smoother
//   scrolling but continuous processing even when not scrolling
$(document).ready(function () {
    // Start fitVids
    var $postContent = $(".post-full-content");
    $postContent.fitVids();
    // End fitVids

    var progressBar = document.querySelector('progress');
    var header = document.querySelector('.floating-header');
    var title = document.querySelector('.post-full-title');

    var lastScrollY = window.scrollY;
    var lastWindowHeight = window.innerHeight;
    var lastDocumentHeight = $(document).height();
    var ticking = false;

    function onScroll() {
        lastScrollY = window.scrollY;
        requestTick();
    }

    function onResize() {
        lastWindowHeight = window.innerHeight;
        lastDocumentHeight = $(document).height();
        requestTick();
    }

    function requestTick() {
        if (!ticking) {
            requestAnimationFrame(update);
        }
        ticking = true;
    }

    function update() {
        var trigger = title.getBoundingClientRect().top + window.scrollY;
        var triggerOffset = title.offsetHeight + 35;
        var progressMax = lastDocumentHeight - lastWindowHeight;

        // show/hide floating header
        if (lastScrollY >= trigger + triggerOffset) {
            header.classList.add('floating-active');
        } else {
            header.classList.remove('floating-active');
        }

        progressBar.setAttribute('max', progressMax);
        progressBar.setAttribute('value', lastScrollY);

        ticking = false;
    }

    window.addEventListener('scroll', onScroll, {passive: true});
    window.addEventListener('resize', onResize, false);

    update();
});
</script>

    

    <!-- Ghost outputs important scripts and data with this tag - it should always be the very last thing before the closing body tag -->
    <!-- ghost_foot -->

</body>
</html>
